{"openapi":"3.1.0","info":{"title":"DB Client API","version":"1.0.0"},"paths":{"/api/v1/auth/register":{"post":{"tags":["auth"],"summary":"Register","description":"Register a new user.","operationId":"register_api_v1_auth_register_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserCreate"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/User"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/auth/login":{"post":{"tags":["auth"],"summary":"Login","description":"Login endpoint.","operationId":"login_api_v1_auth_login_post","requestBody":{"content":{"application/x-www-form-urlencoded":{"schema":{"$ref":"#/components/schemas/Body_login_api_v1_auth_login_post"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Token"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/users/profile":{"get":{"tags":["users"],"summary":"Read User Profile","description":"Get current user's profile information","operationId":"read_user_profile_api_v1_users_profile_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserProfile"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/api/v1/users/settings":{"get":{"tags":["users"],"summary":"Read User Settings","description":"Get current user's settings","operationId":"read_user_settings_api_v1_users_settings_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserSettings"}}}}},"security":[{"OAuth2PasswordBearer":[]}]},"put":{"tags":["users"],"summary":"Update User Settings Endpoint","description":"Update user's settings","operationId":"update_user_settings_endpoint_api_v1_users_settings_put","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserSettings"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserSettings"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/api/v1/queries/":{"get":{"tags":["queries"],"summary":"List Queries","description":"List all queries for the current user with complete information","operationId":"list_queries_api_v1_queries__get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"items":{"$ref":"#/components/schemas/Query"},"type":"array","title":"Response List Queries Api V1 Queries  Get"}}}}},"security":[{"OAuth2PasswordBearer":[]}]},"post":{"tags":["queries"],"summary":"Create Query","description":"Create a new query.\n\n- **query_text**: SQL query to execute\n- **db_username**: Database username\n- **db_password**: Database password\n- **db_tns**: Database TNS connection string\n- **export_location**: Optional custom export location\n- **export_type**: Optional export file type (csv, excel, json, feather)\n- **export_filename**: Optional custom filename for the exported file (extension will be added automatically)\n- **ssh_hostname**: Optional SSH hostname for remote execution","operationId":"create_query_api_v1_queries__post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/QueryCreate"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Query"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/api/v1/queries/batch/rerun":{"post":{"tags":["queries"],"summary":"Batch Rerun Queries","description":"Rerun multiple queries in batch.\n\n- **query_ids**: List of query IDs to rerun\n- All original query parameters will be preserved, including:\n    - query_text\n    - db_username\n    - db_password\n    - db_tns\n    - export_location\n    - export_type\n    - export_filename\n    - ssh_hostname","operationId":"batch_rerun_queries_api_v1_queries_batch_rerun_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/QueryBatchRerun"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/BatchOperationResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/api/v1/queries/batch/delete":{"post":{"tags":["queries"],"summary":"Batch Delete Queries","description":"Delete multiple queries in batch","operationId":"batch_delete_queries_api_v1_queries_batch_delete_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/QueryBatchDelete"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/api/v1/queries/{query_id}":{"get":{"tags":["queries"],"summary":"Get Query Status","description":"Get the status and results of a specific query","operationId":"get_query_status_api_v1_queries__query_id__get","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"query_id","in":"path","required":true,"schema":{"type":"integer","title":"Query Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/QueryResult"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["queries"],"summary":"Delete Query","description":"Delete a query if it's not running or queued","operationId":"delete_query_api_v1_queries__query_id__delete","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"query_id","in":"path","required":true,"schema":{"type":"integer","title":"Query Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/queries/{query_id}/rerun":{"post":{"tags":["queries"],"summary":"Rerun Query","description":"Rerun a specific query","operationId":"rerun_query_api_v1_queries__query_id__rerun_post","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"query_id","in":"path","required":true,"schema":{"type":"integer","title":"Query Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Query"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/queries/stats/current":{"get":{"tags":["queries"],"summary":"Get Current Stats","description":"Get current stats of running and queued queries","operationId":"get_current_stats_api_v1_queries_stats_current_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/QueryStats"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/":{"get":{"summary":"Root","operationId":"root__get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}}},"components":{"schemas":{"BatchOperationResponse":{"properties":{"message":{"type":"string","title":"Message"},"successful_ids":{"items":{"type":"integer"},"type":"array","title":"Successful Ids"},"failed_ids":{"anyOf":[{"additionalProperties":{"type":"string"},"type":"object"},{"type":"null"}],"title":"Failed Ids"}},"type":"object","required":["message","successful_ids"],"title":"BatchOperationResponse"},"Body_login_api_v1_auth_login_post":{"properties":{"grant_type":{"anyOf":[{"type":"string","pattern":"password"},{"type":"null"}],"title":"Grant Type"},"username":{"type":"string","title":"Username"},"password":{"type":"string","title":"Password"},"scope":{"type":"string","title":"Scope","default":""},"client_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Client Id"},"client_secret":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Client Secret"}},"type":"object","required":["username","password"],"title":"Body_login_api_v1_auth_login_post"},"HTTPValidationError":{"properties":{"detail":{"items":{"$ref":"#/components/schemas/ValidationError"},"type":"array","title":"Detail"}},"type":"object","title":"HTTPValidationError"},"Query":{"properties":{"query_text":{"type":"string","title":"Query Text"},"db_username":{"type":"string","title":"Db Username"},"db_password":{"type":"string","title":"Db Password"},"db_tns":{"type":"string","title":"Db Tns"},"export_location":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Export Location"},"export_type":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Export Type"},"export_filename":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Export Filename"},"ssh_hostname":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Ssh Hostname"},"id":{"type":"integer","title":"Id"},"user_id":{"type":"integer","title":"User Id"},"status":{"allOf":[{"$ref":"#/components/schemas/QueryStatus"}],"default":"pending"},"error_message":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Error Message"},"result_metadata":{"anyOf":[{"type":"object"},{"type":"null"}],"title":"Result Metadata"},"created_at":{"type":"string","format":"date-time","title":"Created At"},"started_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Started At"},"updated_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Updated At"},"completed_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Completed At"}},"type":"object","required":["query_text","db_username","db_password","db_tns","id","user_id","created_at"],"title":"Query"},"QueryBatchDelete":{"properties":{"query_ids":{"items":{"type":"integer"},"type":"array","title":"Query Ids"}},"type":"object","required":["query_ids"],"title":"QueryBatchDelete"},"QueryBatchRerun":{"properties":{"query_ids":{"items":{"type":"integer"},"type":"array","title":"Query Ids"}},"type":"object","required":["query_ids"],"title":"QueryBatchRerun"},"QueryCreate":{"properties":{"query_text":{"type":"string","title":"Query Text"},"db_username":{"type":"string","title":"Db Username"},"db_password":{"type":"string","title":"Db Password"},"db_tns":{"type":"string","title":"Db Tns"},"export_location":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Export Location"},"export_type":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Export Type"},"export_filename":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Export Filename"},"ssh_hostname":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Ssh Hostname"}},"type":"object","required":["query_text","db_username","db_password","db_tns"],"title":"QueryCreate"},"QueryResult":{"properties":{"query_id":{"type":"integer","title":"Query Id"},"status":{"$ref":"#/components/schemas/QueryStatus"},"export_location":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Export Location"},"export_type":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Export Type"},"export_filename":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Export Filename"},"ssh_hostname":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Ssh Hostname"},"result_metadata":{"anyOf":[{"type":"object"},{"type":"null"}],"title":"Result Metadata"},"error_message":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Error Message"},"created_at":{"type":"string","format":"date-time","title":"Created At"},"started_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Started At"},"updated_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Updated At"},"completed_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Completed At"}},"type":"object","required":["query_id","status","created_at"],"title":"QueryResult"},"QueryStats":{"properties":{"running_queries":{"type":"integer","title":"Running Queries"},"queued_queries":{"type":"integer","title":"Queued Queries"}},"type":"object","required":["running_queries","queued_queries"],"title":"QueryStats"},"QueryStatus":{"type":"string","enum":["pending","queued","running","transferring","completed","failed"],"title":"QueryStatus"},"Token":{"properties":{"access_token":{"type":"string","title":"Access Token"},"token_type":{"type":"string","title":"Token Type","default":"bearer"}},"type":"object","required":["access_token"],"title":"Token"},"User":{"properties":{"email":{"type":"string","format":"email","title":"Email"},"id":{"type":"integer","title":"Id"},"is_active":{"type":"boolean","title":"Is Active"},"settings":{"anyOf":[{"$ref":"#/components/schemas/UserSettings"},{"type":"null"}]}},"type":"object","required":["email","id","is_active"],"title":"User"},"UserCreate":{"properties":{"email":{"type":"string","format":"email","title":"Email"},"password":{"type":"string","title":"Password"}},"type":"object","required":["email","password"],"title":"UserCreate"},"UserProfile":{"properties":{"id":{"type":"integer","title":"Id"},"email":{"type":"string","title":"Email"},"is_active":{"type":"boolean","title":"Is Active"},"settings":{"anyOf":[{"$ref":"#/components/schemas/UserSettings"},{"type":"null"}]}},"type":"object","required":["id","email","is_active"],"title":"UserProfile"},"UserSettings":{"properties":{"export_location":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Export Location"},"export_type":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Export Type"},"max_parallel_queries":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Max Parallel Queries"},"ssh_hostname":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Ssh Hostname"},"ssh_port":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Ssh Port","default":22},"ssh_username":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Ssh Username"},"ssh_password":{"anyOf":[{"type":"string","format":"password","writeOnly":true},{"type":"null"}],"title":"Ssh Password"},"ssh_key":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Ssh Key"},"ssh_key_passphrase":{"anyOf":[{"type":"string","format":"password","writeOnly":true},{"type":"null"}],"title":"Ssh Key Passphrase"}},"type":"object","title":"UserSettings"},"ValidationError":{"properties":{"loc":{"items":{"anyOf":[{"type":"string"},{"type":"integer"}]},"type":"array","title":"Location"},"msg":{"type":"string","title":"Message"},"type":{"type":"string","title":"Error Type"}},"type":"object","required":["loc","msg","type"],"title":"ValidationError"}},"securitySchemes":{"OAuth2PasswordBearer":{"type":"oauth2","flows":{"password":{"scopes":{},"tokenUrl":"/api/v1/auth/login"}}}}}}